import{d as L,h as F,r as H,i as q,o as g,c as v,a as t,b as D,j as C,e as d,l as B,p as X,m as Y,_ as U,f as x}from"./app.09879e44.js";const V=y=>(X("data-v-9e899a13"),y=y(),Y(),y),W={class:"chooseArea"},N=["src"],O={key:0},j=V(()=>t("div",{class:"center"},null,-1)),z={key:1},P=["src"],$=L({__name:"index",setup(y){const A=F(""),a=H({startX:0,startY:0,startDrag:!1,lastLeft:0,lastTop:0}),r=F(1),E=F(null),i=F(null),b=F(null),u=F(""),w=s=>{const p=Array.from(s.target.files);let n=new FileReader;p.length&&n.readAsDataURL(p[0]),n.onload=function(l){var e;A.value=String((e=l.target)==null?void 0:e.result),i.value&&(i.value.onload=()=>h())}};function f(s){return Boolean(s)}function R(s){return Boolean(s)}const h=(s=a.lastLeft,p=a.lastTop)=>{const n=E.value,l=i.value;if(f(n)){const e=n.getContext("2d");if(e.clearRect(0,0,n.width,n.height),R(l)){let o=l.width,c=l.height;if(o>c){const m=n.width/o;o=n.width*r.value,c=m*c*r.value}else{const m=n.height/c;c=n.height*r.value,o=m*o*r.value}e.drawImage(l,(n.width-o)/2+s,(n.height-c)/2+p,o,c)}}},_=s=>{s=="shrink"?r.value-=.1:s=="zoom"&&(r.value+=.1),h()},T=()=>{const s=E.value;if(f(s)){const n=s.getContext("2d").getImageData(100,100,100,100);let l=document.createElement("canvas");l.width=100,l.height=100,l.getContext("2d").putImageData(n,0,0);let o=l.toDataURL();u.value=o}},k=()=>{const s=Buffer.from(u.value.split(",")[1],"base64"),p=new ArrayBuffer(s.length),n=new Blob([p],{type:"image/png"});console.log(n)},S=s=>{a.startX=s.clientX,a.startY=s.clientY,a.startDrag=!0},I=s=>{!a.startDrag||h(s.clientX-a.startX+a.lastLeft,s.clientY-a.startY+a.lastTop)},M=s=>{a.lastLeft=s.clientX-a.startX+a.lastLeft,a.lastTop=s.clientY-a.startY+a.lastTop,a.startDrag=!1};return(s,p)=>{const n=q("el-button"),l=q("el-button-group");return g(),v("div",null,[t("div",W,[t("input",{type:"file",onChange:w},null,32),t("div",null,[t("img",{src:A.value,ref_key:"imageRef",ref:i,alt:""},null,8,N)])]),A.value?(g(),v("div",O,[t("div",{style:{position:"relative"},onMousemove:I,onMousedown:S,onMouseup:M},[t("canvas",{width:"300",height:"300",style:{border:"2px dashed blue"},ref_key:"canvasRef",ref:E},null,512),j],32),D(l,null,{default:C(()=>[D(n,{onClick:p[0]||(p[0]=e=>_("zoom"))},{default:C(()=>[d("\u653E\u5927")]),_:1}),D(n,{onClick:p[1]||(p[1]=e=>_("shrink"))},{default:C(()=>[d("\u7F29\u5C0F")]),_:1}),D(n,{onClick:T},{default:C(()=>[d("\u786E\u5B9A")]),_:1})]),_:1})])):B("",!0),u.value?(g(),v("div",z,[t("img",{src:u.value,ref_key:"avatarRef",ref:b,class:"avatar",alt:""},null,8,P),D(n,{onClick:k,type:"warning"},{default:C(()=>[d("\u4E0A\u4F20")]),_:1})])):B("",!0)])}}});const Z=U($,[["__scopeId","data-v-9e899a13"]]),J=x("",3),G=x("",1),ss=JSON.parse('{"title":"\u4E00\u4E2A\u7B80\u5355\u7684\u4E0A\u4F20\u56FE\u7247\u5E76\u4E14\u526A\u88C1\u56FE\u7247\u7684\u529F\u80FD","description":"","frontmatter":{},"headers":[],"relativePath":"examples/jianCai/index.md"}'),K={name:"examples/jianCai/index.md"},ns=Object.assign(K,{setup(y){return(A,a)=>(g(),v("div",null,[J,D(Z),G]))}});export{ss as __pageData,ns as default};
