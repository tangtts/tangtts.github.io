import{b as u}from"./chunks/index.f509a1e6.js";import{d as L,r as F,m as H,o as m,a as d,b as e,i as y,s as b,e as q,j as g,p as X,h as Y,_ as U,k as B}from"./app.58fe2863.js";const V=D=>(X("data-v-b5f9984b"),D=D(),Y(),D),W={class:"chooseArea"},N=["src"],O={key:0,style:{"margin-top":"20px"}},j=V(()=>e("div",{class:"center"},null,-1)),z=g("\u653E\u5927"),P=g("\u7F29\u5C0F"),$=g("\u786E\u5B9A"),Z={key:1,style:{"margin-top":"30px"}},J=["src"],G=g("\u4E0A\u4F20"),K=L({setup(D){const C=F(""),a=H({startX:0,startY:0,startDrag:!1,lastLeft:0,lastTop:0}),c=F(1),v=F(null),A=F(null),x=F(null),i=F(""),w=s=>{const l=Array.from(s.target.files);let n=new FileReader;l.length&&n.readAsDataURL(l[0]),n.onload=function(p){var r;C.value=String((r=p.target)==null?void 0:r.result),A.value&&(A.value.onload=()=>h())}};function f(s){return Boolean(s)}function R(s){return Boolean(s)}const h=(s=a.lastLeft,l=a.lastTop)=>{const n=v.value,p=A.value;if(f(n)){const r=n.getContext("2d");if(r.clearRect(0,0,n.width,n.height),R(p)){let o=p.width,t=p.height;if(o>t){const E=n.width/o;o=n.width*c.value,t=E*t*c.value}else{const E=n.height/t;t=n.height*c.value,o=E*o*c.value}r.drawImage(p,(n.width-o)/2+s,(n.height-t)/2+l,o,t)}}},_=s=>{s=="shrink"?c.value-=.1:s=="zoom"&&(c.value+=.1),h()},T=()=>{const s=v.value;if(f(s)){const n=s.getContext("2d").getImageData(100,100,100,100);let p=document.createElement("canvas");p.width=100,p.height=100,p.getContext("2d").putImageData(n,0,0);let o=p.toDataURL();i.value=o}},k=()=>{const s=Buffer.from(i.value.split(",")[1],"base64"),l=new ArrayBuffer(s.length),n=new Blob([l],{type:"image/png"});console.log(n)},S=s=>{a.startX=s.clientX,a.startY=s.clientY,a.startDrag=!0},I=s=>{!a.startDrag||h(s.clientX-a.startX+a.lastLeft,s.clientY-a.startY+a.lastTop)},M=s=>{a.lastLeft=s.clientX-a.startX+a.lastLeft,a.lastTop=s.clientY-a.startY+a.lastTop,a.startDrag=!1};return(s,l)=>(m(),d("div",null,[e("div",W,[e("input",{type:"file",onChange:w},null,32),e("div",null,[e("img",{src:C.value,ref_key:"imageRef",ref:A,alt:""},null,8,N)])]),C.value?(m(),d("div",O,[e("div",{style:{position:"relative","margin-bottom":"10px"},onMousemove:I,onMousedown:S,onMouseup:M},[e("canvas",{width:"300",height:"300",style:{border:"2px dashed blue"},ref_key:"canvasRef",ref:v},null,512),j],32),e("div",null,[y(u,{style:{"margin-right":"10px"},type:"success",onClick:l[0]||(l[0]=n=>_("zoom"))},{default:b(()=>[z]),_:1}),y(u,{style:{"margin-right":"10px"},type:"warning",onClick:l[1]||(l[1]=n=>_("shrink"))},{default:b(()=>[P]),_:1}),y(u,{onClick:T},{default:b(()=>[$]),_:1})])])):q("",!0),i.value?(m(),d("div",Z,[e("img",{src:i.value,ref_key:"avatarRef",ref:x,class:"avatar",alt:""},null,8,J),y(u,{onClick:k},{default:b(()=>[G]),_:1})])):q("",!0)]))}});const Q=U(K,[["__scopeId","data-v-b5f9984b"]]),ss=B("",5),ns=B("",1),os=JSON.parse('{"title":"\u526A\u88C1\u56FE\u7247","description":"","frontmatter":{},"headers":[],"relativePath":"examples/jianCai/index.md"}'),as={name:"examples/jianCai/index.md"},es=Object.assign(as,{setup(D){return(C,a)=>(m(),d("div",null,[ss,y(Q),ns]))}});export{os as __pageData,es as default};
