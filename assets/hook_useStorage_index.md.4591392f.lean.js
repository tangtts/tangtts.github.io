import{N as S,O as B,r as A,c as C,d as v,m as i,o as b,a as u,b as h,i as w,k as m}from"./app.3985b09d.js";function x(s={type:"localStorage",prefix:"",expire:1}){s=S(s)?B(s):s,s={...{type:"localStorage",prefix:"",expire:1},...s};const l=A([]);function c(n,a,p=0){if((a===""||a===null||a===void 0)&&(a=null),p&&(isNaN(p)||p<1))throw new Error("Expire must be a number");(p??(p=s.expire))*1e3;let t={value:a,time:Date.now(),expire:p};window[s.type].setItem(n,JSON.stringify(t));let D=l.value.findIndex(E=>E.key==n);D==-1?l.value.push({key:n,val:t}):l.value[D]={key:n,val:t}}function F(n){if(!window[s.type].getItem(n)||JSON.stringify(window[s.type].getItem(n))==="null")return null;const a=JSON.parse(window[s.type].getItem(n));let p=Date.now();return a.expire&&a.time+s.expire*1e3<p?(o(n),null):(c(n,a.value,a.expire),a.value)}const y=C(()=>{let n=window[s.type].length;l.value=[];for(let a=0;a<n;a++){let p=window[s.type].key(a);if(p){let t=window[s.type].getItem(p);try{l.value.push({key:p,val:JSON.parse(t)})}catch{}}}return l.value});function e(n){return(s.prefix??"")+n}function o(n){window[s.type].removeItem(e(n)),l.value=l.value.filter(a=>a.key!==n)}function f(){window[s.type].clear(),l.value=[]}function g(n){return!!window[s.type].getItem(n)}function d(){return l.value.length||window[s.type].length}return{setStorage:c,getStorage:F,getAllStorage:y,autoAddPrefix:e,removeStorage:o,clearStorage:f,hasStorage:g,getStorageLength:d}}const _=v({__name:"index",setup(s){A();const{getAllStorage:r,removeStorage:l,clearStorage:c,setStorage:F}=x();i({key:"",value:"",expire:""}),i({key:[{required:!0,message:"Please input Key",trigger:"change"}],value:[{required:!0,message:"Please input Key",trigger:"change"}]});function y(e){return e.map(o=>({key:o.key,value:o.val.value,time:o.val.time,expire:o.val.expire}))}return C(()=>y(r.value)),(e,o)=>(b(),u("div"))}});const k=m("",3),q=m("",4),N=JSON.parse('{"title":"useLocaleStorage","description":"","frontmatter":{},"headers":[],"relativePath":"hook/useStorage/index.md"}'),R={name:"hook/useStorage/index.md"},T=Object.assign(R,{setup(s){return(r,l)=>(b(),u("div",null,[k,h("div",null,[w(_)]),q]))}});export{N as __pageData,T as default};
