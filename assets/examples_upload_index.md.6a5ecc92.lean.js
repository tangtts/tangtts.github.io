import{d as g,o as e,a as t,E as m,p as x,h as q,b as F,_ as L,r as d,L as w,q as k,z as R,D as S,i as C,v as f,F as U,f as T,T as I,t as V,j as P,k as h}from"./app.3985b09d.js";import{b as $}from"./chunks/index.0deffe69.js";import{b as z}from"./chunks/index.15a25e41.js";import"./chunks/index.98bbac4d.js";const j=p=>(x("data-v-fc8a8a3c"),p=p(),q(),p),N=["onDrop"],O=j(()=>F("span",null,"+",-1)),M=[O],H=g({__name:"drag",emits:["file"],setup(p,{emit:a}){const l=r=>{a("file",Array.from(r.dataTransfer.files))};return(r,o)=>(e(),t("div",{class:"item",onDrop:m(l,["prevent"]),onDragleave:o[0]||(o[0]=m(()=>{},["prevent"])),onDragover:o[1]||(o[1]=m(()=>{},["prevent"]))},M,40,N))}});const G=L(H,[["__scopeId","data-v-fc8a8a3c"]]),J=["multiple"],K=["src"],Q={class:"name"},W=["onClick"],X=F("p",null,"x",-1),Y=[X],Z=g({__name:"upload",props:{onSuccess:{type:Function,default:(p,a)=>({})},onExceed:{type:Function,default:(p,a)=>({})},onBeforeLoad:{type:Function},limit:Number,fileList:{type:Array,default:()=>[]},multiple:Boolean,drag:Boolean},setup(p){const a=p,l=d([]),r=s=>{const n=s.target.files;n&&i(Array.from(n))},o=s=>{l.value=l.value.filter(n=>s.uid!==n.uid),URL.revokeObjectURL(s.url)},i=s=>{if(s.length===0)return;const{limit:n,multiple:D,onExceed:B}=a;if(n&&l.value.length+s.length>n)return B(s,l.value);D||(s=s.slice(0,1));for(const _ of s){const u=_;u.uid=E(),A(u),c(u)}},A=s=>{let n={size:s.size,url:URL.createObjectURL(s),raw:s,uid:s.uid,name:s.name};l.value=[...l.value,n]},c=s=>{if(!a.onBeforeLoad)return y(s);let n=!0;a.onBeforeLoad&&(n=a.onBeforeLoad(s),n&&y(s))},y=s=>{console.log("执行上传"),a.onSuccess(s,l.value)},b=w(),v=()=>{b.value.value="",b.value.click()};function E(){return Date.now()}return k(()=>a.fileList,s=>{for(const n of s)n.uid||(n.uid=E());l.value.push(...s)},{immediate:!0,deep:!0}),(s,n)=>(e(),t("div",null,[p.drag?(e(),R(G,{key:0,onFile:i})):(e(),t("div",{key:1,onClick:v},[F("input",{type:"file",onChange:r,multiple:p.multiple,ref_key:"inputRef",ref:b,class:"input"},null,40,J),S(s.$slots,"default")])),C(I,{tag:"ul",class:"list"},{default:f(()=>[(e(!0),t(U,null,T(l.value,D=>(e(),t("li",{key:D.uid,class:"item"},[F("img",{src:D.url,alt:""},null,8,K),F("p",Q,V(D.name),1),F("div",{class:"close",onClick:B=>o(D)},Y,8,W)]))),128))]),_:1})]))}});const ss={name:String},ns=g({__name:"index",props:ss,setup(p){const a=d(!1),l=()=>{alert("success")},r=()=>{alert("超出个数限制")},o=d([]),i=A=>(alert(`开始校验${A.name}`),!0);return(A,c)=>(e(),t("div",null,[C($,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=y=>a.value=y),"active-text":"拖拽上传","inactive-text":"点击上传"},null,8,["modelValue"]),C(Z,{style:{"margin-top":"20px"},"on-success":l,"on-exceed":r,limit:3,drag:a.value,"before-upload":i,multiple:"",fileList:o.value,"onUpdate:fileList":c[1]||(c[1]=y=>o.value=y)},{default:f(()=>[C(z,{size:"large",style:{width:"200px",height:"80px"}},{default:f(()=>[P("选择文件")]),_:1})]),_:1},8,["drag","fileList"])]))}}),as=h("",5),ls=h("",5),cs=JSON.parse('{"title":"上传","description":"","frontmatter":{},"headers":[{"level":2,"title":"drag 组件","slug":"drag-组件","link":"#drag-组件","children":[]}],"relativePath":"examples/upload/index.md"}'),ps={name:"examples/upload/index.md"},ys=Object.assign(ps,{setup(p){return(a,l)=>(e(),t("div",null,[as,C(ns),ls]))}});export{cs as __pageData,ys as default};
