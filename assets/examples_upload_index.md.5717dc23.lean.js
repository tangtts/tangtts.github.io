import{d as h,o as t,c,B as E,p as b,m as L,a as l,_ as R,h as B,C as w,y as U,q as k,z as S,b as A,j as m,F as T,k as I,D as $,t as V,i as x,e as g,f as j}from"./app.09879e44.js";const z=o=>(b("data-v-fc8a8a3c"),o=o(),L(),o),P=["onDrop"],N=z(()=>l("span",null,"+",-1)),O=[N],M=h({__name:"drag",emits:["file"],setup(o,{emit:a}){const p=r=>{a("file",Array.from(r.dataTransfer.files))};return(r,e)=>(t(),c("div",{class:"item",onDrop:E(p,["prevent"]),onDragleave:e[0]||(e[0]=E(()=>{},["prevent"])),onDragover:e[1]||(e[1]=E(()=>{},["prevent"]))},O,40,P))}});const H=R(M,[["__scopeId","data-v-fc8a8a3c"]]),G=["multiple"],J=["src"],K={class:"name"},Q=["onClick"],W=l("p",null,"x",-1),X=[W],Y=h({__name:"upload",props:{onSuccess:{type:Function,default:(o,a)=>({})},onExceed:{type:Function,default:(o,a)=>({})},onBeforeLoad:{type:Function},limit:Number,fileList:{type:Array,default:()=>[]},multiple:Boolean,drag:Boolean},setup(o){const a=o,p=B([]),r=s=>{const n=s.target.files;!n||i(Array.from(n))},e=s=>{p.value=p.value.filter(n=>s.uid!==n.uid),URL.revokeObjectURL(s.url)},i=s=>{if(s.length===0)return;const{limit:n,multiple:F,onExceed:_}=a;if(n&&p.value.length+s.length>n)return _(s,p.value);F||(s=s.slice(0,1));for(const q of s){const f=q;f.uid=v(),u(f),D(f)}},u=s=>{let n={size:s.size,url:URL.createObjectURL(s),raw:s,uid:s.uid,name:s.name};p.value=[...p.value,n]},D=s=>{if(!a.onBeforeLoad)return d(s);let n=!0;a.onBeforeLoad&&(n=a.onBeforeLoad(s),n&&d(s))},d=s=>{console.log("\u6267\u884C\u4E0A\u4F20"),a.onSuccess(s,p.value)},y=w(),C=()=>{y.value.value="",y.value.click()};function v(){return Date.now()}return U(()=>a.fileList,s=>{for(const n of s)n.uid||(n.uid=v());p.value.push(...s)},{immediate:!0,deep:!0}),(s,n)=>(t(),c("div",null,[o.drag?(t(),k(H,{key:0,onFile:i})):(t(),c("div",{key:1,onClick:C},[l("input",{type:"file",onChange:r,multiple:o.multiple,ref_key:"inputRef",ref:y,class:"input"},null,40,G),S(s.$slots,"default")])),A($,{tag:"ul",class:"list"},{default:m(()=>[(t(!0),c(T,null,I(p.value,F=>(t(),c("li",{key:F.uid,class:"item"},[l("img",{src:F.url,alt:""},null,8,J),l("p",K,V(F.name),1),l("div",{class:"close",onClick:_=>e(F)},X,8,Q)]))),128))]),_:1})]))}});const Z={name:String},ss=h({__name:"index",props:Z,setup(o){const a=B(!0);defineOptions({name:"myUpload"});const p=()=>{alert("success")},r=()=>{alert("\u8D85\u51FA\u4E2A\u6570\u9650\u5236")},e=B([]),i=u=>(alert(`\u5F00\u59CB\u6821\u9A8C${u.name}`),!0);return(u,D)=>{const d=x("el-switch"),y=x("el-button");return t(),c("div",null,[A(d,{modelValue:a.value,"onUpdate:modelValue":D[0]||(D[0]=C=>a.value=C),"active-text":"\u62D6\u62FD\u4E0A\u4F20","inactive-text":"\u70B9\u51FB\u4E0A\u4F20"},null,8,["modelValue"]),A(Y,{"on-success":p,"on-exceed":r,limit:3,drag:a.value,"before-upload":i,multiple:"",fileList:e.value,"onUpdate:fileList":D[1]||(D[1]=C=>e.value=C)},{default:m(()=>[A(y,null,{default:m(()=>[g("\u9009\u62E9\u6587\u4EF6")]),_:1})]),_:1},8,["drag","fileList"])])}}}),ns=l("h1",{id:"\u4E0A\u4F20",tabindex:"-1"},[g("\u4E0A\u4F20 "),l("a",{class:"header-anchor",href:"#\u4E0A\u4F20","aria-hidden":"true"},"#")],-1),as=l("p",null,"\u901A\u8FC7\u70B9\u51FB\u6216\u8005\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6\u3002",-1),ls=l("blockquote",null,[l("p",null,[g("\u5176\u5B9E\u53EF\u4EE5\u6269\u5C55\u5F88\u591A\uFF0C\u4F46\u662F\u6CA1\u5FC5\u8981,\u603B\u4F53\u6765\u8BF4\u6BD4\u8F83\u7B80\u5355"),l("br"),l("em",null,"time:2022/11/3 4:21")])],-1),ps=l("h1",{id:"\u57FA\u7840\u7528\u6CD5",tabindex:"-1"},[g("\u57FA\u7840\u7528\u6CD5 "),l("a",{class:"header-anchor",href:"#\u57FA\u7840\u7528\u6CD5","aria-hidden":"true"},"#")],-1),os=j("",5),cs=JSON.parse('{"title":"\u4E0A\u4F20","description":"","frontmatter":{},"headers":[{"level":2,"title":"drag \u7EC4\u4EF6","slug":"drag-\u7EC4\u4EF6","link":"#drag-\u7EC4\u4EF6","children":[]}],"relativePath":"examples/upload/index.md"}'),es={name:"examples/upload/index.md"},rs=Object.assign(es,{setup(o){return(a,p)=>(t(),c("div",null,[ns,as,ls,ps,A(ss),os]))}});export{cs as __pageData,rs as default};
